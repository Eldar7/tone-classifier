\subsection{Разработка вспомогательных инструментов}
% Выбор языка для реализации вспомогательных инструментов приложения
%   - Python
В роли вспомогательных инструментов выступают компоненты, которые в совокупности
решают две задачи:
\begin{itemize}
    \item Составление сбалансированной коллекции для обучения классификатора;
    \item Построения тонального лексикона на основе сообщений сети \twitter.
\end{itemize}

    \subsubsection{Балансировка исходных обучающих коллекций}
    % Описать с уклоном на атоматическую разметку сообщений на тональные классы.
    % (Как это было сделано в статьях)


    \subsubsection{Прием текстовых сообщений сети Twitter}
    Прием тестовых сообщений реализован на основе библиотеки {\tt tweepy}, которая
    предоставляет интерфейс взаимодействия с {\it Streaming Twitter API}.
    Сначала требуется пройти авторизацию в социальной сети Twitter, основанную
    на открытом протоколе {\it OAuth}.
    От пользователя требуются предварительно зарегистрировать новое приложение,
    после чего получить необходимые ключи авторизации.

    Для приема и сохранения сообщений, реализован класс {\tt StdOutListener}
    (см. {\it приложение A}) который  наследует класс {\tt tweepy.StreamListener},
    c переопределением обработчиков следующих событий:
    \begin{itemize}
        \item {\tt on\_data} --- срабатывает в случае поступления новых данных
        с сервиса {\it Twitter Streaming API};
        \item {\tt on\_error} --- обработчик события возникновения исключения
        в процессе трансляции сообщений.
    \end{itemize}

    Все принятые сообщения сохраняются в текстовый файл формата {\tt .csv}.
    После того как объект-слушатель создан, необходимо подключиться к трансляции
    с параметрами фильтрации (строка 6, листинг \ref{lst:tweepyStream}):
    \begin{itemize}
        \item <<{\tt track=\lbrack"twitter"\rbrack}>> --- указывает на
        извлечение всех сообщений сети (все сообщения отмечены тэгом
        {\tt twitter});
        \item <<{\tt languages=\lbrack"ru"\rbrack}>> --- определяет регион,
        сообщения которого попадут в трансляцию.
    \end{itemize}

    \lstset{style=python}
    \lstinputlisting[caption="Прием сообщений сети Twitter",
        label={lst:tweepyStream}]{parts/code/dev/tweepyStream.py}

    % КОД ВЫЛОЖИТЬ В ПРИЛОЖЕНИЕ

    \subsubsection{Создание лексиконов методом определения тональности словосочетаний}
    % Модуль pmi.py
    Для построения лексиконов используется подход, рассмотренный в п.
    \ref{sec:soEvaluation}.
    Подход основан на определении семантической ориентации словосочетаний, которая
    определяется метрикой {\it точечной взаимной информации} (на основе формулы
    \ref{eq:pmi}):
    \begin{equation}
        PMI(t_1, t_2) = \log_2 \dfrac{P(t_1 \cap t_2)}{P(t_1) \cdot P(t_2)} \nonumber
    \end{equation}

    Поскольку для каждого терма $t$, содержащегося в лексиконе необходимо
    сопоставить оценку тональности, то в качестве одного из аргументов метрики
    PMI можно рассмотреть один из двух маркеров:
    \begin{itemize}
        \item {\tt <<Excellent>>} --- положительный оттенок;
        \item {\tt <<Poor>>} --- негативный оттенок.
    \end{itemize}

    Степень принадлежности терма двум маркерам называется его {\it семантической
    ориентацией}, и определяется формулой (на основе формулы \ref{eq:so}):
    \begin{equation}
        SO(word) = PMI(word, {\tt Excellent}) - PMI(word, {\tt Poor}) \nonumber
    \end{equation}

    Пусть $K$ --- это коллекция сообщений. Тогда лексикон составляется следующим
    образом:
    \begin{equation}
        S : \{\langle t, SO(t) \rangle \hspace{2pt}| \hspace{4pt} t \in K_{Excellent} \cup K_{Poor}\}
    \end{equation}

    Где $K_{Excellent}$ и $K_{Poor}$ – разделение исходной коллекции $K$ на
    непересекающиеся тональные классы сообщений с положительным и негативным
    оттенками соответственно.  Для построения оценочных лексиконов по сообщениям
    Твиттера вместо сочетаемости с конкретными словами используется встречаемость
    слова с положительными (отрицательными) эмотиконами.
